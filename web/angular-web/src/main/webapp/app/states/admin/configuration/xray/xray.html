<div class="content-layout-container">
    <h1>JFrog Xray Integration</h1>

    <div class="content-wrapper xray-configurations">
        <div class="card stretch card-pole-pad card-side-pad">

            <div class="alert alert-warning" ng-if="!AdminConfigurationXray.footerDao.getInfo().xrayConfigured">
                <a href ng-click="AdminConfigurationXray._updateFooter(); AdminConfigurationXray.getData()"
                        class="pull-right"><i class="icon-refresh"></i> Refresh</a>
                <span ng-bind-html="AdminConfigurationXray.notConnnectedToXrayMessage"></span>
            </div>

            <jf-panel jf-panel-heading="Xray Configuration" ng-if="AdminConfigurationXray.footerDao.getInfo().xrayConfigured">
                <div class="form-group form-checkbox">
                    <jf-checkbox text="Enable Xray Integration">
                        <input type="checkbox"
                                id="xrayIndex"
                                ng-change="AdminConfigurationXray.xrayEnabledChange()"
                                ng-model="AdminConfigurationXray.xrayEnabled">
                    </jf-checkbox>
                </div>
                <div class="form-group">
                    <div class="form-group-cell">
                        <jf-checkbox text="Allow downloads when Xray is unavailable">
                            <input type="checkbox"
                                    ng-disabled="!AdminConfigurationXray.xrayEnabled"
                                    ng-change="AdminConfigurationXray.setAllowWhenUnavailable()"
                                    ng-model="AdminConfigurationXray.xrayAllowWhenUnavailable">
                        </jf-checkbox>
                        <jf-help-tooltip html="AdminConfigurationXray.TOOLTIP.admin.configuration.xray.allowWhenXrayUnavilable"></jf-help-tooltip>
                    </div>
                    <div class="form-group-cell">
                        <jf-checkbox text="Allow downloads of blocked artifacts">
                            <input type="checkbox"
                                    ng-disabled="!AdminConfigurationXray.xrayEnabled"
                                    ng-change="AdminConfigurationXray.setAllowBlockedDownload()"
                                    ng-model="AdminConfigurationXray.xrayAllowBlocked">
                        </jf-checkbox>
                        <jf-help-tooltip html="AdminConfigurationXray.TOOLTIP.admin.configuration.xray.allowDownloadsBlocked"></jf-help-tooltip>
                    </div>
                </div>
            </jf-panel>
            <div class="pull-right admin-grid-buttons">
                <a ng-click="AdminConfigurationXray.add()"
                    ng-if="AdminConfigurationXray.footerDao.getInfo().xrayConfigured"
                    ng-disabled="!AdminConfigurationXray.xrayEnabled" id="new-button">
                    <i class="grid-button-icon icon icon-new"></i>Add
                </a>
            </div>
            <jf-grid
                    ng-if="AdminConfigurationXray.xrayEnabled"
                    grid-options="AdminConfigurationXray.gridOptions"
                    filter-field="name"
                    object-name="repository/repositories"
                    auto-focus="true">
            </jf-grid>
        </div>
    </div>
</div>